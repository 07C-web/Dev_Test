<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Testing_Dev</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.33.1/sweetalert2.min.js"></script>
</head>
<body>
<script>
(function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else {
    swal("Error", "Browser tidak mendukung geolocation", "error");
  }
})();

function showPosition(position) {
  var lat = position.coords.latitude;
  var lng = position.coords.longitude;

  // ganti dengan URL Web App kamu
  var url = "https://script.google.com/macros/s/AKfycbxtbWhxLynQNtJU5kUZ_ERU9OYXb5-skGUZARgzsISFHl4V6fDiij7rb_jFSZ2MW5oG/exec";

  fetch(url, {
    method: "POST",
    body: JSON.stringify({ lat: lat, lng: lng }),
    headers: { "Content-Type": "application/json" }
  })
  .then(res => res.json())
  .then(data => {
    swal({
      title: "Absensi Berhasil",
      text: "Lokasi berhasil direkam.\nTerimakasih!",
      type: "success"
    }).then(() => {
      window.location.href = "http://07c-web.github.io.dev-test/";
    });
  })
  .catch(err => {
    swal("Error", "Gagal kirim data ke server", "error");
  });
}

function showError(error) {
  swal("Error", "Tidak bisa mengambil lokasi. Izinkan akses lokasi.", "error");
}
</script>
</body>
</html>
